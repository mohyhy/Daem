import re

# โ ููุงุฆู ุงููููุงุช ุงูููุงุฆูุฉ
sadness_words = [
    # ูุดุงุนุฑ ุงูุญุฒู ูุงูุงูุชุฆุงุจ
    "ุญุฒูู", "ุฒุนูุงู", "ุถุงูู", "ููุชุฆุจ", "ูุญุจุท", "ูุญุจุท ุฌุฏุงู", "ุจุงุฆุณ", "ูุฆูุจ",
    "ุชุนูุณ", "ูุงุฆุณ", "ููููู", "ูุฎููู", "ูููุณุฑ", "ููุณูุฑ", "ููุณูุฑ ุงูุฎุงุทุฑ",
    "ููููุงุฑ", "ููุฒุนุฌ", "ููุฌูุน", "ุชุนุจุงู", "ูุฑูู", "ูุด ูุงุฏุฑ", "ูุง ุนูุฏู ุทุงูุฉ", "ูุง ุฅูู ุฎูู",
    
    # ูุดุงุนุฑ ุงูููุฏ ูุงูุฎุณุงุฑุฉ
    "ููุฏุช", "ููุฏุงู", "ุฎุณุฑุช", "ุบุจุช ุนูู", "ุบูุงุจู", "ูุญุฏู", "ูุญูุฏ", "ุนุฒูุฉ", "ุฃูุง ูุญุงูู",
    
    # ุชุนุจูุฑุงุช ูุคููุฉ ููุคุซุฑุฉ
    "ุตุนุจ", "ูุงุณู", "ูุฃุณุงุฉ", "ูุคูู", "ูุงุฑุซู", "ุฌุฑุญ", "ุฌุฑูุญ", "ุฌุฑุญ ุบุงุฆุฑ", "ูุฒูู ุฑูุญู",
    "ุฏููุน", "ุฏููุนู", "ุจููุช", "ูุขุจุฉ", "ุญุงูุฉ ููุณูุฉ", "ููุฌุฉ ุญุฒู", "ูุฒูู ุฏุงุฎูู",
    "ุงููุณุฑุช", "ูุง ูู ุฃูู", "ูู ุดู ุถุฏู", "ุงูุชููุช", "ุงุฎุชููุช", "ููุณูุชู ุชุนุจุงูุฉ",
    
    # ูุงูุน ุฃููู (ุญุฑุจุ ููุฏุ ุชุฏููุฑ)
    "ูุตู", "ุดูุฏุงุก", "ุฅุตุงุจุฉ", "ุฏูุฑุช", "ุฏูุงุฑ", "ุชูุฌูุฑ", "ูุฒูุญ", "ููุฏุช ุจูุชู",
    "ุงูุฏูุงุฑ", "ุงูุญุฑุจ", "ุฎูู ุงูุญุฑุจ", "ุงูุฃูู ุงูููุณู", "ุงููุงูุน ุตุนุจ", "ูุนุงูุงุฉ", "ุงูุงุญุชูุงู",
    
    # ุธุฑูู ูุงุณูุฉ
    "ูุด ูุงุฏุฑ ุฃุชุญูู", "ุชุนุจุช", "ูุง ุจุฏู ุฃุญูู", "ูุฎููู ูู ุฌููุง", "ููุณูุชู ูุฏูุฑุฉ", "ูุง ุญุฏุง ุญุงุณุณ ููู",
    
    # ุชุนุจูุฑุงุช ุฏุงุฑุฌุฉ ุฅุถุงููุฉ
    "ุฌุนุงู", "ุจุฑุฏุงู", "ูููู", "ููุณู", "ูุงููุด ูููุฉ", "ูุง ุญุฏ ุณุงุฆู", "ูุด ุทุงูู ุญุงูู",
    "ุชุนุจุช ูู ูู ุดู", "ุญุงุณุณ ุงูุฏููุง ุณูุฏุฉ"
]

happiness_words = [
    # ูููุงุช ูุตุญู ูุจุงุดุฑุฉ
    "ุณุนูุฏ", "ุณุนุงุฏุฉ", "ูุฑุญุงู", "ูุฑุญ", "ูุจุณูุท", "ูุจุณูุท ุนูู ุงูุขุฎุฑ", "ููุฑุญ", "ูุณุฑูุฑ",
    "ูุจุชูุฌ", "ูุทูุฆู", "ูุฑุชุงุญ", "ููุชุนุด", "ุฑุงุถู", "ูุฎูุฑ", "ูุชูุงุฆู", "ูุดุฑู", "ูุจุชุณู",
    "ุฅูุฌุงุจู", "ูุดุท", "ูุดุงุท ุนุงูู", "ูููุชุฌ", "ููุฉ ุงูุณุนุงุฏุฉ", "ุนุงูุด ุจุฃูุถู ุญุงู",

    # ุชุนุจูุฑุงุช ูุญููุฉ ูุนุงุทููุฉ
    "ุนุงูุด ุฃุญูู ุฃูุงูู", "ุทุงูุฑ ูู ุงููุฑุญ", "ูุฑุญุฉ ุงูุนูุฑ", "ุนุงูุด ุงููุญุธุฉ", "ุงูููู ูุงู ุญูู",
    "ูู ุดูุก ุชูุงู", "ููุณูุชู ูุฑุชุงุญุฉ", "ุฃูุง ุทุงูุฑ", "ูุด ูุตุฏู ุงููุฑุญุฉ", "ุงูููู ุณุนูุฏ",
    "ููุจู ูุฑุญุงู", "ุทุงูุฉ ุฅูุฌุงุจูุฉ", "ุญูุงุชู ุฌูููุฉ", "ูููู ููุชุงุฒ", "ุญุณูุช ุจุงูุฑุงุญุฉ", 
    "ูุฑุญุชู ูุจูุฑุฉ", "ุงุจุชุณุงูุชู ูู ุงูููุจ", "ููุดู ุชูุงู", "ูููุงู ุทุงูุฉ", "ุงูุฃููุฑ ูุงุดูุฉ ุชูุงู",
    "ูุจุณูุท ุจุงูุญูุงุฉ", "ุญุงุณุณ ุจุฑุงุญุฉ ููุณูุฉ", "ุฑุงูู", "ุงูุฌู ุญูู ูุงูููุณูุฉ ุฃุญูู",

    # ูุดุชูุงุช ุงูุฃูุนุงู ูุงููุดุงุนุฑ
    "ุณุนุฏ", "ูุณุนุฏ", "ููุฑุญ", "ูุฑุญ", "ุงูุจุณุท", "ูุจุณูุท", "ุงุจุชูุฌ", "ูุจุชูุฌ", "ุชูุงุคู", "ูุชูุงุฆู",
    "ุงุทูุฃู", "ุงุทูุฆูุงู", "ุฑุงุญุฉ", "ุงุฑุชุงุญ", "ุงูุดุฑุญ ุตุฏุฑู", "ุจุดูุด", "ุจุดุงุดุฉ"
]


anxiety_words = [
    # ูููุงุช ูุตุญู ูุจุงุดุฑุฉ
    "ููู", "ูููุงู", "ูุชูุชุฑ", "ุชูุชุฑ", "ุชูุชุฑ ุดุฏูุฏ", "ุฎุงุฆู", "ุฎุงูู", "ูุฑุนูุจ",
    "ูุฑุชุจู", "ูุฑุชุจู ุฐูููุงู", "ูุฑุชุจู ุนุงุทููุงู", "ูุดูุด", "ูุญุชุงุฑ", "ูุชุฑุฏุฏ", "ูุถุบูุท",
    "ุถุบุท ููุณู", "ูุด ูุทูุฆู", "ูุด ูุฑุชุงุญ", "ูุฒุนูุฌ", "ุดุงุฑุฏ", "ูุงุฌุณ", "ูุงุฌุณ ุฏุงุฆู",
    "ูุด ูุฑูุฒ", "ุฃููุงุฑ ุณูุจูุฉ", "ุชูููุฑ ุณูุจู", "ุญุงุณุณ ุจุงูุฎูู", "ุญุงุณุณ ุจุงูููู",
    "ุญุงุณุณ ุจุงูุชูุชุฑ", "ุญุงุณุณ ุจุงูุถุบุท", "ุดุงูู ูู", "ุฏูุงุช ููุจู ุณุฑูุนุฉ",

    # ุชุนุจูุฑุงุช ุฏุงุฑุฌุฉ ููุญููุฉ
    "ููุจู ููุจูุถ", "ููุจู ูุด ูุฑุชุงุญ", "ุญุงุณุณ ุจุดู ุฑุญ ูุตูุฑ", "ุญุงุณุณ ุจุฎูู ุฏุงุฎูู",
    "ุญุงุณุณ ุฅูู ุฑุญ ุฃููุฌุฑ", "ูุถุบูุท ูุชูุฑ", "ูู ูุฑุชุงุญ", "ุญุงุณุณ ุจููุน", "ูุชูุชุฑ ุนูู ุงูุขุฎุฑ",
    "ูู ุชูููุฑู ูุดุชุช", "ูุด ูุงุฏุฑ ุฃุฑูุฒ", "ุญุงุณุณ ุงูุฏููุง ุณูุฑูุช", "ูุด ุนุงุฑู ุดู ุฃุนูู",
    "ุญุงุณุณ ุฅูู ุฑุญ ุฃุฎุชูู", "ุจุญุณ ูู ุดู ุจูุฎูู", "ูุง ุจูุฏุฑ ุฃูุงู ูู ุงูุชูููุฑ", 
    "ุฎูู ุฏุงุฎูู", "ุนูุฏู ุชูุชุฑ ุนุงูู", "ูุด ุทุงูู ุงูุชูุชุฑ", "ุฃููุงุฑ ุนู ุชูุงุญููู",
    "ุฃููุฑ ูุชูุฑ", "ุชุดุชุช", "ุฑุนุดุฉ", "ูุจุถ ุณุฑูุน", "ูุนุฏุชู ูุด ูุฑุชุงุญุฉ", "ุบุตุฉ",

    # ูุดุชูุงุช ุฃูุนุงู ููุดุงุนุฑ
    "ููู", "ูููู", "ูููู", "ุชูุชุฑ", "ูุชูุชุฑ", "ูุชูุชุฑ", "ูุฎุงู", "ุฎุงูู", "ูุฑุนูุจ", "ูุฑุชุนุจ",
    "ูุฑุชุจู", "ุงุฑุชุจุงู", "ุงุญุชุงุฑ", "ุญุงุฆุฑ", "ุชุฑุฏุฏ", "ูุชุฑุฏุฏ", "ุถุบุท", "ูุถุบูุท", "ูุดุนุฑ ุจุงูุฎูู"
]

anger_words = [
    # ูููุงุช ูุตุญู ูุจุงุดุฑุฉ
    "ุบุงุถุจ", "ุบุถุจุงู", "ูุณุชุงุก", "ูููุนู", "ููููุฑ", "ูุบุชุงุธ", "ูุงูู", "ุญุงูู",
    "ูุณุชูุฒ", "ุญุงุณุณ ุจุงูุญูุฏ", "ุญุงุณุณ ุจุงูุบุถุจ", "ุญุงุณุณ ุจุงูููุฑ", "ุญุงุณุณ ุจุงูุบููุงู",
    "ูุถุงูู", "ูุถุงูู ุฌุฏุงู", "ูุญุชูู", "ูุดุฏูุฏ", "ูููุฌุฑ", "ุซุงุฆุฑ", "ุซูุฑุฉ ุบุถุจ",
    "ูุด ุทุงูู ุญุฏุง", "ูุด ุทุงูู ุงูุฏููุง", "ูุด ูุงุฏุฑ ุฃุชุญูู", "ูุงูู ุนูู ููุณู",

    # ุชุนุจูุฑุงุช ุฏุงุฑุฌุฉ ููุญููุฉ
    "ูุนุตุจ", "ูุนุตูุจ", "ูุนุตุจุฉ", "ุจุฏู ุฃุตุฑุฎ", "ููุณู ุฃุตุฑุฎ", "ุจุฏู ุฃูุฌุฑ", "ุจุฏู ุฃุทุฎ",
    "ุดุฑุงุฑ ุนูููู", "ููุจู ุจูุบูู", "ุฏูู ุจูุบูู", "ุฑุงุณู ุจุฏู ูููุน", "ูุงูู ุฎูู",
    "ุฎูููู ุถูู", "ุทุงุฑ ุนููู", "ุฑุญ ุฃุฌู", "ูุด ูุงุฏุฑ ุฃุชุญูู", "ูู ุดุงูู ูุฏุงูู",
    "ูู ุทุงูู ุญุงูู", "ูุฑูุช ูู ุดู", "ูุฑูุฒุช", "ุฃูุง ูุชูุฑูุฒ", "ุงุณุชูุฒููู", "ุนู ุจุฑุชุนุด ูู ุงูููุฑ",
    "ุงููุถุน ูุด ุทุจูุนู", "ุญุงุฑู ุฏูู", "ุฒุนูุงู ูุชูุฑ", "ุญุงุณุณ ุจุงููููุฉ", "ููุณู ุฃุทุฎ",
    "ุญุงุณุณ ุจูุงุฑ", "ุญุงุณุณ ุจููุฑ", "ุญุงุณุณ ุฅูู ุฃููุฌุฑ", "ุฎูููู ูุญุงูู", "ูุง ุชุญููุง ูุนู",
    "ูุง ุจุฏู ุฃุดูู ุญุฏุง", "ุจุฏู ุฃุถุฑุจ ุญุฏุง",

    # ูุดุชูุงุช ุงูุฃูุนุงู
    "ูุบุถุจ", "ุบุถุจ", "ุบุถุจุงู", "ููุฑ", "ููููุฑ", "ูุบูู ุงูุฏู", "ุบููุงู",
    "ุงููุนู", "ูููุนู", "ุนุตูุจ", "ูุนุตูุจ", "ูุฑูุฒ", "ูุชูุฑูุฒ", "ูุชู", "ูุงุจุช",
    "ุงุญุชูู", "ูุญุชูู", "ุซุงุฑ", "ุงุณุชุดุงุท", "ุชูููู", "ุชูุฌูุฑ", "ุงููุฌุฑ"
]


def normalize_text(text):
    text = text.lower()
    text = re.sub(r'[ูููููููู]', '', text)  # ุฅุฒุงูุฉ ุงูุชุดููู
    text = re.sub(r'[^\w\s]', '', text)    # ุฅุฒุงูุฉ ุงูุฑููุฒ
    return text

def analyze_sentiment_scoring(text):
    text = normalize_text(text)
    scores = {"sadness": 0, "happiness": 0, "anxiety": 0, "anger": 0}

    for word in sadness_words:
        if word in text:
            scores["sadness"] += 3

    for word in happiness_words:
        if word in text:
            scores["happiness"] += 1

    for word in anxiety_words:
        if word in text:
            scores["anxiety"] += 2

    for word in anger_words:
        if word in text:
            scores["anger"] += 2

    if all(score == 0 for score in scores.values()):
        return "neutral", 0.0

    dominant_mood = max(scores, key=scores.get)
    score = scores[dominant_mood] / max(10, sum(scores.values()))  # Normalize
    return dominant_mood, round(score, 2)

def generate_support_reply(mood):
    import random

    responses = {
        "sadness": [
            "๐ ุฃูุง ูุนูุ ุจุนุฑู ูุฏูุด ุงูุดุนูุฑ ุตุนุจ. ุงุญูููู ุฃูุชุฑ ูู ุจุชุญุจุ ูููู ุชุฑุชุงุญ.",
            "๐ ูู ูุญุธุงุช ุงูุญุฒูุ ุจุณ ูุญุชุงุฌ ุญุฏุง ูุณูุนูุง... ูุฃูุง ููู ุนุดุงูู.",
            "๐ ูุง ูู ุดู ุฃุตุนุจ ูู ุงูุฅุญุณุงุณ ุจุงููุญุฏุฉ ุฃู ุงููุณุฑ ุงูุฏุงุฎููุ ุจุณููุชู ุฃูุง ุณุงูุนู.",
            "๐๏ธ ุญุชู ูู ูู ุดู ุญููู ูุด ูุงุถุญุ ูุฌูุฏู ููู ุจุญุฏ ุฐุงุชู ููุฉ.",
            "๐ข ุฌุฑูุจ ุชูุชุจ ุดู ุญุงุณุณ... ุฃุญูุงููุง ุงูููุงู ูู ุฃูู ุฎุทูุฉ ููุฑุงุญุฉ.",
            "๐ค ุงูุญุฒู ููุฌุฉุ ุจุชูุฌู ูุจุชุฑูุญ... ุฎูููู ุฃููู ูุนู ูุญุฏ ูุง ุชูุฏู ุดูู."
        ],
        "happiness": [
            "๐ ูุง ุณูุงู! ุทุงูุชู ุงูุฅูุฌุงุจูุฉ ุจุชููุฑ! ุดู ุงูุณุจุจุ ุงุญูููู.",
            "๐ ูุณุนุฏ ููุจู! ูุจุณูุท ุฅูู ูุจุณูุทุ ููุจุณูุท ุฅูู ูุนู ุจูุงููุญุธุฉ.",
            "๐ ุฎูู ูุงูุดุนูุฑ ุงูุญูู ููุจุฑุ ูุดุงุฑููู ุดู ุฎูุงู ุชุญุณ ููู.",
            "๐ ูุญุธุงุช ุงููุฑุญ ูุงุฒู ูุญุชูู ูููุงุ ุญุชู ูู ูุงูุช ุตุบูุฑุฉ.",
            "๐ ุจุชููู ุชุถู ุงูุณุนุงุฏุฉ ููุงุฒูุงูุ ููู ูู ุดู ุญูู ุตุงุฑ... ูููู ุนููู!",
            "๐บ ููุง ุชูุฑุญุ ุญุชู ุงูููุงู ุจููุฑุญ! ุดุงุฑููู ูุฑุญุชูุ ููู ุจูููุฉ."
        ],
        "anxiety": [
            "๐ฐ ุญุงุณุณ ุจุชูุชุฑู... ุฎุฐ ููุณ ุนููู ูุนูุ ููููู ุดู ุงูุดู ุงููู ุดุงุบูู.",
            "๐ฑ ุงูููู ุดุนูุฑ ุทุจูุนูุ ูููู ูุง ุจูุนุฑู ููุชู. ุฃูุง ุณุงูุนู.",
            "๐งโโ๏ธ ุฌุฑูุจ ุชุชููุณ ุจุจุทุก: ุดููู... ุฒููุฑ... ุดูู ุดูู ุจูุฑุฌุน ุงูุชูุงุฒู.",
            "๐คฏ ุญุชู ูู ุงูุฏููุง ูุดูุดุฉุ ุฏุงูููุง ูู ุดู ุซุงุจุช: ุฃูุช ูุด ูุญุงูู.",
            "๐งก ุดุงุฑููู ุดู ุนู ุชููุฑุ ุญุชู ูู ูุงูุช ุฃููุงุฑ ูุดุชุชุฉ. ูุง ูู ุญูู ููู.",
            "๐ญ ูุฑุงุช ุจูููู ุจุณ ุจุฏูุง ุญุฏุง ูุณูุนูุง ุจูุง ูุตูุญุฉ... ุฃูุง ููู ููุงู ุงููุญุธุฉ."
        ],
        "anger": [
            "๐ก ุจุนุฑู ุฅูู ุฌููุงู ูุงุฑ... ุจุณ ุงุญูููู ุดู ุตุงุฑุ ูููู ูุฎูู ุดูู.",
            "๐ฅ ุงูุบุถุจ ูููู ูุบูู ุงูููุจ... ุจุณ ูุน ุงูุญููุ ุจููุฒู ุดูู ุดูู.",
            "๐ข ููุง ุชููุฌุฑุ ูุด ุถุนู... ุฃุญูุงููุง ูู ุชุฑุงูู. ุฅุญูู ููุถูุถ.",
            "๐จ ุดู ุงูุดู ุงููู ุงุณุชูุฒูุ ุฎูููู ุฃุณูุนู ุจุนูููู ูุด ุจุณ ุจุฃุฐูู.",
            "๐คฌ ุจุชููู ุชููู ูุงู ุงููุณุงุญุฉ ุขููุฉ ูุฅูู ูุชูุด ุฎูููุ ุจุฏูู ุฃุญูุงู.",
            "๐ค ูุดุงุนุฑู ูุด ุบูุทุ ูุงูุบุถุจ ุทุจูุนู... ุงุญูููู ููู ุจููุด ูู ุดู."
        ],
        "neutral": [
            "๐ ูููู ุงููููุ ูู ุดู ุญุงุจุจ ุชุญูู ุนููุ",
            "๐ค ุญุชู ูู ูุด ุนุงุฑู ุดู ุญุงุณุณุ ุฎูููุง ูุจุฏุฃ ูู ููู.",
            "๐งก ูุด ูุงุฒู ุชููู ููู ูุดุงุนุฑ ูููุฉ... ูุฌูุฏู ุจุญุฏ ุฐุงุชู ููุงูุฉ.",
            "๐ ูู ูุฒุงุฌู ูุชููุจุ ุฃูุง ูุนู ููุชุดูู ุณูุง.",
            "๐ ุฃููุงุช ุจูููู ุจุณ ุชุงูููู... ุงุญูููู ุฃู ุดู ุจุชุญุณูู.",
            "โ๏ธ ุฎุฐ ุฑุงุญุชูุ ูุง ูู ุถุบุท. ุญุชู ุงูุตูุช ูููู ูุญููู."
        ]
    }

    return random.choice(responses.get(mood, responses["neutral"]))
