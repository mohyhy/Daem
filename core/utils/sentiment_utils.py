import re

# โ ููุงุฆู ุงููููุงุช ุงูููุงุฆูุฉ
sadness_words = [
    "ุญุฒูู", "ุฒุนูุงู", "ุถุงูู", "ููุชุฆุจ", "ูุญุจุท", "ูุญูุฏ", "ุจุงุฆุณ", "ูููุณุฑ", "ูุงุฆุณ",
    "ููููู", "ููุฌูุน", "ูุฆูุจ", "ููุณูุฑ", "ููุฒุนุฌ", "ุชุนูุณ", "ูุฎููู", "ููุฏุช", "ุฎุณุฑุช",
    "ููุฏุงู", "ุตุนุจ", "ูุงุณู", "ูุฃุณุงุฉ", "ูุคูู", "ูุงุฑุซู", "ุญูุฒู", "ุฌุฑูุญ", "ุฏููุน", 
    "ูุขุจุฉ", "ุญุงูุฉ ููุณูุฉ", "ููุฌุฉ ุญุฒู", "ูุฒูู ุฑูุญู", "ุฌุฑุญ ุบุงุฆุฑ", "ููุณูุฑ ุงูุฎุงุทุฑ", "ููููุงุฑ", "ููุญุจุท ุฌุฏุงู",
    "ูุตู", "ุดูุฏุงุก", "ุฏูุฑุช", "ุฏูุงุฑ", "ุญุฑุจ", "ูุฒูุญ", "ุชูุฌูุฑ", "ููุฏุช ุจูุชู", "ุงุตุงุจุฉ",
    "ุชุนุจุงู", "ูุฑูู", "ูุด ูุงุฏุฑ", "ูุง ุนูุฏู ุทุงูุฉ", "ูุง ุฅูู ุฎูู","ุฌุนุงู"

]

happiness_words = [
    "ุณุนูุฏ", "ูุฑุญุงู", "ูุจุณูุท", "ููุฑุญ", "ูุชุญูุณ", "ูุชูุงุฆู", "ูุณุฑูุฑ", "ูุจุชูุฌ",
    "ููุชุนุด", "ูุฑุชุงุญ", "ูุทูุฆู", "ูุฎูุฑ", "ุฑุงุถู", "ุฑุงุฆุน", "ูุดุฑู", "ูุจุชุณู", "ุนุงูุด ุฃุญูู ุฃูุงูู",
    "ูุงูู", "ุทุงูุฑ ูู ุงููุฑุญ", "ุนุงูุด ุงููุญุธุฉ", "ูุฑุญุฉ ุงูุนูุฑ", "ูููุงู ุทุงูุฉ", "ุนุงูุด ุจุฃูุถู ุญุงู", 
    "ุฅูุฌุงุจู", "ูุดุงุท ุนุงูู", "ูุดุท", "ูููุชุฌ", "ูุจุณูุท ุนูู ุงูุขุฎุฑ", "ููุฉ ุงูุณุนุงุฏุฉ"
]

anxiety_words = [
    "ููู", "ูุชูุชุฑ", "ุฎุงุฆู", "ูุฑุนูุจ", "ูุฑุชุจู", "ุดุงูู ูู", "ูุถุบูุท", "ูุดูุด",
    "ูุญุชุงุฑ", "ูุฒุนูุฌ", "ูุด ูุทูุฆู", "ุดุงุฑุฏ", "ุฎุงูู", "ุชูุชุฑ ุดุฏูุฏ", "ูุด ูุฑูุฒ", 
    "ูุฑุชุจู ุฐูููุงู", "ูุฑุชุจู ุนุงุทููุงู", "ูููุงู", "ูุด ูุฑุชุงุญ", "ุฏูุงุช ููุจู ุณุฑูุนุฉ",
    "ูุชุฑุฏุฏ", "ุญุงุณุณ ุจุงูุถุบุท", "ุญุงุณุณ ุจุงูุฎูู", "ุถุบุท ููุณู", "ูุงุฌุณ", "ุฃููุงุฑ ุณูุจูุฉ"
]

anger_words = [
    "ุบุงุถุจ", "ูุนุตุจ", "ูุณุชุงุก", "ูููุนู", "ุญุงุณุณ ุจุงูุบุถุจ", "ููููุฑ", "ุญุงุณุณ ุจุงูููุฑ",
    "ูุบุชุงุธ", "ุญุงุณุณ ุจุงูุนุตุจูุฉ", "ูุงูู", "ูุณุชูุฒ", "ุญุงุณุณ ุจุงูุญูุฏ", "ุจุฏู ุฃุตุฑุฎ", "ุจุฏู ุฃูุฌุฑ",
    "ุซุงุฆุฑ", "ุซูุฑุฉ ุบุถุจ", "ุญุงุณุณ ุจุงูุบููุงู", "ูุด ุทุงูู ุญุฏุง", "ุญุงุณุณ ุจุงููููุฉ", "ุญุงุฑู ุฏูู",
    "ุฒุนูุงู ูุชูุฑ", "ูููุงู ุบูุธ", "ุดุฑุงุฑ ุนูููู", "ูุงูู ุนูู ููุณู", "ููุณู ุฃุตุฑุฎ", "ูุถุงูู ุฌุฏุงู"
]


def normalize_text(text):
    text = text.lower()
    text = re.sub(r'[ูููููููู]', '', text)  # ุฅุฒุงูุฉ ุงูุชุดููู
    text = re.sub(r'[^\w\s]', '', text)    # ุฅุฒุงูุฉ ุงูุฑููุฒ
    return text

def analyze_sentiment_scoring(text):
    text = normalize_text(text)
    scores = {"sadness": 0, "happiness": 0, "anxiety": 0, "anger": 0}

    for word in sadness_words:
        if word in text:
            scores["sadness"] += 3

    for word in happiness_words:
        if word in text:
            scores["happiness"] += 1

    for word in anxiety_words:
        if word in text:
            scores["anxiety"] += 2

    for word in anger_words:
        if word in text:
            scores["anger"] += 2

    if all(score == 0 for score in scores.values()):
        return "neutral", 0.0

    dominant_mood = max(scores, key=scores.get)
    score = scores[dominant_mood] / max(10, sum(scores.values()))  # Normalize
    return dominant_mood, round(score, 2)

def generate_support_reply(mood):
    responses = {
        "sadness": [
            "๐ ุฃูุง ุญุงุณุณ ููู... ุงูุญุฒู ุตุนุจุ ุจุณ ูุฌูุฏู ููุง ุฏููู ุดุฌุงุนุชู. ุงุญูููู ุฃูุซุฑ ุฅุฐุง ุญุงุจุจ.",
            "๐ ูุญุธุงุช ุงูุญุฒู ูุคููุฉุ ุจุณ ูู ุดูุก ุจููุฑ. ุฃูุง ูุนู ุฎุทูุฉ ุจุฎุทูุฉ.",
            "๐ ุงูุญุฒู ุซูููุ ุจุณ ูุดุงุฑูุชู ุจุชุฎูู. ุฃูุช ูุด ูุญุงูู."
        ],
        "happiness": [
            "๐ ูุฑุญุชู ุชุณุนุฏูุง! ุดุงุฑููุง ุณุจุจ ุณุนุงุฏุชู!",
            "๐ ุญูู ุชุดููู ุจูุงูุทุงูุฉ ุงูุฅูุฌุงุจูุฉ! ุงุณุชูุฑ ุชูุดุฑูุง.",
            "๐ ูุญุธุงุช ุงููุฑุญ ุชุณุชุญู ุงูุชูุฏูุฑ! ุฎููู ูุจุณูุท."
        ],
        "anxiety": [
            "๐ฑ ุงูููู ุทุจูุนู... ุญุงูู ุชุงุฎุฏ ููุณ ุนูููุ ููู ุดูุก ุจูุชุญุณู.",
            "๐ฐ ุญุงุณุณ ุจููููุ ุฎุฐ ุงูุฃููุฑ ุฎุทูุฉ ุฎุทูุฉ. ุฃูุง ููู ุนุดุงู ุฃุณูุนู.",
            "๐งโโ๏ธ ุญุงูู ุชุฑูุญ ุจุงููุ ูุญูููุง ุฃูุซุฑ ุนู ุดู ูุณุจุจ ุงูุชูุชุฑ."
        ],
        "anger": [
            "๐ฅ ุงูุบุถุจ ูุดุงุนุฑ ูููุฉุ ุชูุฑูุบูุง ุจุงูููุงู ูููุฏ. ุงุญูููู ุฃูุซุฑ.",
            "๐ก ุญุงุณุณ ุจููุฑ ูุจูุฑุ ุดุงุฑููู ุดู ุตุงูุฑ ูุนู.",
            "๐ข ุงูุบุถุจ ุฃุญูุงููุง ุจูุบุทู ุนูู ูุดุงุนุฑ ุฃุนูู... ุฎูููุง ูุญุงูู ูููููุง ุณูุง."
        ],
        "neutral": [
            "๐ค ุงุญูููู ููู ุญุงุณุณ ุงููููุ",
            "๐งก ุจุณูุนู ุจูู ุชุฑููุฒุ ุฎุฐ ููุชู.",
            "๐ ุฃูุง ูุนู ุจุฃู ููุช. ุงุญูู ุฃู ุดู ุจุฎุงุทุฑู."
        ]
    }

    import random
    return random.choice(responses.get(mood, responses["neutral"]))
